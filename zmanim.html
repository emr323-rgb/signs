<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>זמנים - בית הכנסת לייקווד</title>
    <script src="https://unpkg.com/kosher-zmanim@0.6.0/dist/kosher-zmanim.min.js"></script>
    <style>
        /* (Your existing styles – keep them exactly as in the previous version) */
        /* Paste your full <style> block here from the last working version */
    </style>
</head>
<body>
    <!-- (Your existing HTML structure – header, grid, sections, IDs) -->
    <!-- Paste your full body content here -->

    <script>
        const options = {
            date: new Date(),
            timeZoneId: "America/New_York",
            latitude: 40.096,
            longitude: -74.222,
            elevation: 15,
            complexZmanim: true
        };

        const zmanim = KosherZmanim.getZmanimJson(options);

        // Hebrew date
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('he-IL', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

        // Format helper
        function format(timeString) {
            if (!timeString) return 'לא זמין';
            const [hour, minute] = timeString.split(':');
            const date = new Date();
            date.setHours(hour);
            date.setMinutes(minute);
            return date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
        }

        // Fill zmanim
        document.getElementById('netz').textContent = format(zmanim.times.sunrise);
        document.getElementById('shema-gra').textContent = format(zmanim.times.sofZmanShmaGRA);
        document.getElementById('shema-mga').textContent = format(zmanim.times.sofZmanShmaMGA);
        document.getElementById('chatzot').textContent = format(zmanim.times.chatzot);
        document.getElementById('mincha-gedola').textContent = format(zmanim.times.minchaGedola);
        document.getElementById('plag').textContent = format(zmanim.times.plagHaMincha);
        document.getElementById('sunset').textContent = format(zmanim.times.sunset);
        document.getElementById('tzeit').textContent = format(zmanim.times.tzais72);  // 72 min tzeit

        // Variable davening (edit offsets)
        const plagTime = zmanim.times.plagHaMincha;
        if (plagTime) {
            const [h, m] = plagTime.split(':');
            let date = new Date();
            date.setHours(h);
            date.setMinutes(m - 15);
            document.getElementById('mincha-time').textContent = date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
        }

        const sunsetTime = zmanim.times.sunset;
        if (sunsetTime) {
            const [h, m] = sunsetTime.split(':');
            let date = new Date();
            date.setHours(h);
            date.setMinutes(m + 20);
            document.getElementById('maariv-time').textContent = date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
        }

        // Variable shiur
        if (sunsetTime) {
            const [h, m] = sunsetTime.split(':');
            let date = new Date();
            date.setHours(h);
            date.setMinutes(m + 50);  // Adjust as needed
            document.getElementById('halacha-time').textContent = date.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
        }
    </script>
</body>
</html>
